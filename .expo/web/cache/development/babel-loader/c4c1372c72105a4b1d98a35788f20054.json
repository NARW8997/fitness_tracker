{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from \"react\";\nimport base64 from \"base-64\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Button } from \"react-native-elements\";\n\nfunction LoginScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useState = React.useState({\n    username: \"\",\n    password: \"\"\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      userinfo = _React$useState2[0],\n      setUserinfo = _React$useState2[1];\n\n  var inputChange = function inputChange(e, key) {\n    setUserinfo(function (state) {\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, key, e));\n    });\n  };\n\n  var login = function login() {\n    var reponse, code, result;\n    return _regeneratorRuntime.async(function login$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(fetch(\"http://cs571.cs.wisc.edu:5000/login\", {\n              method: \"GET\",\n              headers: {\n                Authorization: \"Basic \" + base64.encode(userinfo.username + \":\" + userinfo.password)\n              }\n            }));\n\n          case 2:\n            reponse = _context.sent;\n            code = reponse.status;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(reponse.json());\n\n          case 6:\n            result = _context.sent;\n\n            if (!(code !== 200)) {\n              _context.next = 10;\n              break;\n            }\n\n            Alert.alert(result.message ? result.message : \"network error\");\n            return _context.abrupt(\"return\");\n\n          case 10:\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('user_token', result.token));\n\n          case 12:\n            _context.next = 14;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('username', userinfo.username));\n\n          case 14:\n            _context.next = 16;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('password', userinfo.password));\n\n          case 16:\n            navigation.navigate(\"Profile\");\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var toSignup = function toSignup() {\n    navigation.navigate(\"Signup\");\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    }\n  }, React.createElement(Text, {\n    style: styles.head\n  }, \"Fitness Tracker\"), React.createElement(Text, {\n    style: styles.paragraph\n  }, \"Welcome Please login or signup to continue\"), React.createElement(TextInput, {\n    value: userinfo.username,\n    style: styles.input,\n    placeholder: \"Username\",\n    placeholderTextColor: \"red\",\n    onChangeText: function onChangeText(e) {\n      inputChange(e, \"username\");\n    }\n  }), React.createElement(TextInput, {\n    value: userinfo.password,\n    style: styles.input,\n    placeholder: \"Password\",\n    placeholderTextColor: \"red\",\n    onChangeText: function onChangeText(e) {\n      inputChange(e, \"password\");\n    },\n    secureTextEntry: true\n  }), React.createElement(View, {\n    style: styles.btnContainer\n  }, React.createElement(Button, {\n    title: \"LOGIN\",\n    onPress: login\n  }), React.createElement(Button, {\n    title: \"SIGNUP\",\n    onPress: toSignup\n  })));\n}\n\nvar styles = StyleSheet.create({\n  head: {\n    fontSize: 20,\n    fontWeight: \"600\",\n    marginBottom: 20\n  },\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: \"red\",\n    width: 200,\n    height: 35,\n    marginBottom: 28,\n    paddingLeft: 8\n  },\n  btnContainer: {\n    flexDirection: \"row\",\n    width: 200,\n    justifyContent: \"space-around\"\n  },\n  button: {\n    backgroundColor: \"red\"\n  },\n  paragraph: {\n    fontSize: 14,\n    marginBottom: 8\n  }\n});\nexport default LoginScreen;","map":{"version":3,"sources":["D:/vs_project/react-native1-alpha-NARW8997/views/Login.jsx"],"names":["React","base64","AsyncStorage","Button","LoginScreen","navigation","useState","username","password","userinfo","setUserinfo","inputChange","e","key","state","login","fetch","method","headers","Authorization","encode","reponse","code","status","json","result","Alert","alert","message","setItem","token","navigate","toSignup","flex","alignItems","justifyContent","styles","head","paragraph","input","btnContainer","StyleSheet","create","fontSize","fontWeight","marginBottom","container","backgroundColor","borderWidth","borderColor","width","height","paddingLeft","flexDirection","button"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport base64 from \"base-64\";\nimport { View, Text, TextInput, StyleSheet, Alert } from \"react-native\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Button } from \"react-native-elements\";\n\nfunction LoginScreen({ navigation }) {\n  const [userinfo, setUserinfo] = React.useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  //set value\n  const inputChange = (e, key) => {\n    setUserinfo((state) => {\n      return {\n        ...state,\n        [key]: e,\n      };\n    });\n  };\n\n  //login\n  const login = async () => {\n    const reponse = await fetch(\"http://cs571.cs.wisc.edu:5000/login\", {\n      method: \"GET\",\n      headers: {\n        Authorization:\n          \"Basic \" + base64.encode(userinfo.username + \":\" + userinfo.password),\n      },\n    });\n  \n    let code = reponse.status\n    const result =await reponse.json()\n\n    if(code !== 200) {\n      Alert.alert(result.message ? result.message :\"network error\")\n      return\n    }\n    \n    await AsyncStorage.setItem(\n      'user_token',\n      result.token\n    )\n\n    await AsyncStorage.setItem(\n      'username',\n      userinfo.username\n    )\n\n    await AsyncStorage.setItem(\n      'password',\n      userinfo.password\n    )\n\n    navigation.navigate(\"Profile\");\n  };\n\n  const toSignup = () => {\n    navigation.navigate(\"Signup\");\n  };\n\n  return (\n    <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\" }}>\n      <Text style={styles.head}>Fitness Tracker</Text>\n      <Text style={styles.paragraph}>\n        Welcome Please login or signup to continue\n      </Text>\n      <TextInput\n        value={userinfo.username}\n        style={styles.input}\n        placeholder=\"Username\"\n        placeholderTextColor=\"red\"\n        onChangeText={(e) => {\n          inputChange(e, \"username\");\n        }}\n      />\n      <TextInput\n        value={userinfo.password}\n        style={styles.input}\n        placeholder=\"Password\"\n        placeholderTextColor=\"red\"\n        onChangeText={(e) => {\n          inputChange(e, \"password\");\n        }}\n        secureTextEntry={true}\n      />\n      <View style={styles.btnContainer}>\n        <Button title=\"LOGIN\" onPress={login}></Button>\n        <Button title=\"SIGNUP\" onPress={toSignup}></Button>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  head: {\n    fontSize: 20,\n    fontWeight: \"600\",\n    marginBottom: 20,\n  },\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: \"red\",\n    width: 200,\n    height: 35,\n    marginBottom: 28,\n    paddingLeft: 8,\n  },\n  btnContainer: {\n    flexDirection: \"row\",\n    width: 200,\n    justifyContent: \"space-around\",\n  },\n  button: {\n    backgroundColor: \"red\",\n  },\n  paragraph: {\n    fontSize: 14,\n    marginBottom: 8,\n  },\n});\n\nexport default LoginScreen;\n"]},"metadata":{},"sourceType":"module"}